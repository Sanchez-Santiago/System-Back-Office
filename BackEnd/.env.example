PORT=8000

# ============================================
# CONFIGURACIÓN SUPABASE (REQUERIDO)
# ============================================
# El sistema ahora usa supabase-js (cliente oficial de Supabase)
# Ya no se requiere POSTGRES_URL ni variables de conexión PostgreSQL directa

# URL de tu proyecto Supabase
# Obtener de: https://supabase.com/dashboard → Project Settings → API → URL
SUPABASE_URL=https://your-project-ref.supabase.co

# Service Role Key (NO usar Anon Key)
# Obtener de: https://supabase.com/dashboard → Project Settings → API → service_role key
# ⚠️ NUNCA exponer esta key en el frontend - es solo para backend
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ============================================
# SEGURIDAD Y AUTENTICACIÓN (REQUERIDO)
# ============================================

# Modo de operación: development | production
MODO=development

# Orígenes permitidos para CORS (separados por coma)
# En desarrollo: http://localhost:5173 (Vite default)
# En producción: https://tu-dominio.com,https://www.tu-dominio.com
ALLOWED_ORIGINS=http://localhost:5173

# Clave secreta para firmar tokens JWT (¡GENERAR CLAVE FUERTE EN PRODUCCIÓN!)
# Mínimo 32 caracteres aleatorios
# Generar con: openssl rand -base64 32
JWT_SECRET=tu_clave_secreta_muy_segura_minimo_32_caracteres

# Algoritmo de firma JWT
# Opciones: HS256 (recomendado), HS384, HS512
JWT_ALGORITHM=HS256

# ============================================
# CONFIGURACIÓN DE CONEXIÓN (OPCIONAL)
# ============================================

# Tiempo máximo de espera para queries (milisegundos)
DB_CONNECTION_TIMEOUT=10000

# Número de reintentos ante fallos de conexión
DB_CONNECTION_RETRIES=3

# ============================================
# INSTRUCCIONES DE CONFIGURACIÓN
# ============================================

# 1. Copiar este archivo: cp .env.example .env
# 2. Configurar SUPABASE_URL y SUPABASE_SERVICE_ROLE_KEY con tus credenciales
# 3. Generar JWT_SECRET seguro para producción
# 4. Ajustar ALLOWED_ORIGINS según tu dominio frontend
# 5. NUNCA subir .env a git (ya está en .gitignore)

# ============================================
# NOTAS IMPORTANTES
# ============================================

# - El sistema usa exclusivamente supabase-js para conexión a base de datos
# - Ya no se soporta conexión directa con drivers PostgreSQL (deno-postgres, npm:postgres)
# - Las cookies httpOnly se manejan automáticamente para autenticación
# - El token JWT se renueva automáticamente mediante endpoint /usuario/refresh
# - En Deno Deploy, configurar estas variables en el dashboard del proyecto
